<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:MobileApplication.Pages.RecipeList"
             xmlns:model="clr-namespace:MobileApplication.Model"
             x:Class="MobileApplication.Pages.RecipeList.RecipeList"
             x:DataType="local:RecipeListViewModel"
             Loaded="RecipeList_OnLoaded"
             Title="Recipes">

  <Grid RowSpacing="10" Margin="0,10" WidthRequest="350" HorizontalOptions="Center">
    <CollectionView ItemsSource="{Binding Recipes}" SelectedItem="{Binding SelectedRecipe}" SelectionMode="Single" SelectionChangedCommand="{Binding DetailViewCommand}">
      <CollectionView.ItemTemplate>
        <DataTemplate x:DataType="model:Recipe">
          <VerticalStackLayout Padding="5" Margin="5">
            <Border StrokeThickness="0" WidthRequest="325" IsVisible="{Binding HasImage}">
              <Border.StrokeShape>
                <RoundRectangle CornerRadius="10,10,10,10"/>
              </Border.StrokeShape>
              <Image Source="{Binding ImagePath}"/>
            </Border>
            <Grid ColumnDefinitions="*, auto">
              <Label Text="{Binding Name}" FontSize="20" FontAttributes="Bold" VerticalOptions="Center"/>
              <HorizontalStackLayout Grid.Column="1">
                <Label Text="{Binding Rating}" VerticalOptions="Center" FontSize="18" />
                <Label Text="â˜…" VerticalOptions="Center" TextColor="Orange" FontSize="18"/>
              </HorizontalStackLayout>
            </Grid>
            <Label Text="{Binding CreatedAt}" HorizontalOptions="End"/>
          </VerticalStackLayout>
        </DataTemplate>
      </CollectionView.ItemTemplate>
    </CollectionView>
    <Button 
      Text="+"
      FontSize="20"
      WidthRequest="20"
      HeightRequest="20"
      CornerRadius="10"
      HorizontalOptions="End"
      VerticalOptions="End"
      Margin="5"
      Padding="5"
      BackgroundColor="DodgerBlue"
      TextColor="White"
      Command="{Binding NewRecipeCommand}"
      />
  </Grid>

</ContentPage>